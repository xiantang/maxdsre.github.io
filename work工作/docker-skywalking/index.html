<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>xiantang </title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.63.0-DEV" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.3f5912c237ddd38c8e76debe081c7ca7.css" rel="stylesheet">
    

    

    
      
    

    
    
    <meta property="og:title" content="" />
<meta property="og:description" content="Docker 部署 SkyWalking OAP &amp; UI ▶ 获取镜像  当前版本：6.1.0 自制镜像：Docker 镜像 - 构建 SkyWalking OAP &amp; UI
 # oap docker pull registry.cn-hangzhou.aliyuncs.com/anoy/skywalking-oap # ui docker pull registry.cn-hangzhou.aliyuncs.com/anoy/skywalking-ui ▶ 部署 SkyWalking OAP 简易部署（仅供体验）
docker run -d \ --name skywalking-oap \ -p 11800:11800 \ -e TZ=Asia/Shanghai \ registry.cn-hangzhou.aliyuncs.com/anoy/skywalking-oap 端口说明
 0.0.0.0/11800：gRPC APIs，用于 Java、.NetCore、Node.js、Istio 探针 0.0.0.0/12800：http rest APIs，用于 SkyWalking UI 请求，做 GraphQL 查询  自定义配置
配置挂载路径 /skywalking/config，配置文件说明：
 application.yml：基本配置，参考 application.yml component-libraries.yml：组件库配置，参考 component-libraries." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xiantang.github.io/work%E5%B7%A5%E4%BD%9C/docker-skywalking/" />

<meta itemprop="name" content="">
<meta itemprop="description" content="Docker 部署 SkyWalking OAP &amp; UI ▶ 获取镜像  当前版本：6.1.0 自制镜像：Docker 镜像 - 构建 SkyWalking OAP &amp; UI
 # oap docker pull registry.cn-hangzhou.aliyuncs.com/anoy/skywalking-oap # ui docker pull registry.cn-hangzhou.aliyuncs.com/anoy/skywalking-ui ▶ 部署 SkyWalking OAP 简易部署（仅供体验）
docker run -d \ --name skywalking-oap \ -p 11800:11800 \ -e TZ=Asia/Shanghai \ registry.cn-hangzhou.aliyuncs.com/anoy/skywalking-oap 端口说明
 0.0.0.0/11800：gRPC APIs，用于 Java、.NetCore、Node.js、Istio 探针 0.0.0.0/12800：http rest APIs，用于 SkyWalking UI 请求，做 GraphQL 查询  自定义配置
配置挂载路径 /skywalking/config，配置文件说明：
 application.yml：基本配置，参考 application.yml component-libraries.yml：组件库配置，参考 component-libraries.">

<meta itemprop="wordCount" content="167">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="Docker 部署 SkyWalking OAP &amp; UI ▶ 获取镜像  当前版本：6.1.0 自制镜像：Docker 镜像 - 构建 SkyWalking OAP &amp; UI
 # oap docker pull registry.cn-hangzhou.aliyuncs.com/anoy/skywalking-oap # ui docker pull registry.cn-hangzhou.aliyuncs.com/anoy/skywalking-ui ▶ 部署 SkyWalking OAP 简易部署（仅供体验）
docker run -d \ --name skywalking-oap \ -p 11800:11800 \ -e TZ=Asia/Shanghai \ registry.cn-hangzhou.aliyuncs.com/anoy/skywalking-oap 端口说明
 0.0.0.0/11800：gRPC APIs，用于 Java、.NetCore、Node.js、Istio 探针 0.0.0.0/12800：http rest APIs，用于 SkyWalking UI 请求，做 GraphQL 查询  自定义配置
配置挂载路径 /skywalking/config，配置文件说明：
 application.yml：基本配置，参考 application.yml component-libraries.yml：组件库配置，参考 component-libraries."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://xiantang.github.io/" class="f3 fw2 hover-white no-underline white-90 dib">
      xiantang
    </a>
    <div class="flex-l items-center">
      

      
      













    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        WORK(工作)S
      </p>
      <h1 class="f1 athelas mb1"></h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="0001-01-01T00:00:00Z">January 1, 0001</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><h1 id="docker-部署-skywalking-oap--ui"><strong>Docker 部署 SkyWalking OAP &amp; UI</strong></h1>
<h3 id="-获取镜像">▶ 获取镜像</h3>
<blockquote>
<p>当前版本：6.1.0
自制镜像：<a href="https://www.jianshu.com/p/a3a8d54b7da9">Docker 镜像 - 构建 SkyWalking OAP &amp; UI</a></p>
</blockquote>
<pre><code># oap
docker pull registry.cn-hangzhou.aliyuncs.com/anoy/skywalking-oap

# ui
docker pull registry.cn-hangzhou.aliyuncs.com/anoy/skywalking-ui
</code></pre><h3 id="-部署-skywalking-oap">▶ 部署 SkyWalking OAP</h3>
<p><strong>简易部署（仅供体验）</strong></p>
<pre><code>docker run -d \
--name skywalking-oap \
-p 11800:11800 \
-e TZ=Asia/Shanghai \
registry.cn-hangzhou.aliyuncs.com/anoy/skywalking-oap
</code></pre><p><strong>端口说明</strong></p>
<ul>
<li><code>0.0.0.0/11800</code>：gRPC APIs，用于 Java、.NetCore、Node.js、Istio 探针</li>
<li><code>0.0.0.0/12800</code>：http rest APIs，用于 SkyWalking UI 请求，做 GraphQL 查询</li>
</ul>
<p><strong>自定义配置</strong></p>
<p>配置挂载路径 <code>/skywalking/config</code>，配置文件说明：</p>
<ul>
<li><code>application.yml</code>：基本配置，参考 <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fapache%2Fskywalking%2Fblob%2Fmaster%2Fdocker%2Fconfig%2Fapplication.yml">application.yml</a></li>
<li><code>component-libraries.yml</code>：组件库配置，参考 <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fapache%2Fskywalking%2Fblob%2Fmaster%2Fdocker%2Fconfig%2Fcomponent-libraries.yml">component-libraries.yml</a></li>
<li><code>alarm-settings.yml</code>：报警配置，参考 <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fapache%2Fskywalking%2Fblob%2Fmaster%2Fdocker%2Fconfig%2Falarm-settings.yml">alarm-settings.yml</a></li>
<li><code>datasource-settings.properties</code>：数据库配置，参考 <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fapache%2Fskywalking%2Fblob%2Fmaster%2Fdocker%2Fconfig%2Fdatasource-settings.properties">datasource-settings.properties</a></li>
<li><code>log4j2.xml</code>：日志配置， 参考 <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fapache%2Fskywalking%2Fblob%2Fmaster%2Fdocker%2Fconfig%2Flog4j2.xml">log4j2.xml</a></li>
</ul>
<h3 id="-部署-skywalking-ui">▶ 部署 SkyWalking UI</h3>
<pre><code>docker run -d \
--name skywalking-ui \
--link skywalking-oap:skywalking-oap \
-p 8088:8080 \
-e TZ=Asia/Shanghai \
registry.cn-hangzhou.aliyuncs.com/anoy/skywalking-ui \
--collector.ribbon.listOfServers=skywalking-oap:12800 \
--security.user.admin.password=admin
</code></pre><p>参数说明：</p>
<ul>
<li><code>collector.ribbon.listOfServers</code>：SkyWalking OAP 地址，多个地址用 &ldquo;,&rdquo; 分隔</li>
<li><code>security.user..password</code>：指定登录的账号密码</li>
</ul>
<p>更多配置参考：<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fapache%2Fskywalking%2Fblob%2Fmaster%2Fapm-webapp%2Fsrc%2Fmain%2Fresources%2Fapplication.yml">https://github.com/apache/skywalking/blob/master/apm-webapp/src/main/resources/application.yml</a></p>
<h3 id="-访问-skywalking">▶ 访问 SkyWalking</h3>
<ul>
<li>地址：<a href="https://links.jianshu.com/go?to=http%3A%2F%2F127.0.0.1%3A8088%2F">http://127.0.0.1:8088/</a></li>
<li>账号：admin</li>
<li>密码：admin</li>
</ul>
<p>play 集成scala</p>
<p>自定义一个task</p>
<p>build.sbt</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#66d9ef">import</span> scala.sys.process._
<span style="color:#66d9ef">lazy</span> <span style="color:#66d9ef">val</span> agent <span style="color:#66d9ef">=</span> taskKey<span style="color:#f92672">[</span><span style="color:#66d9ef">Unit</span><span style="color:#f92672">]</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Execute clone skywalking-agent scripts&#34;</span><span style="color:#f92672">)</span>
agent <span style="color:#66d9ef">:</span><span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
 <span style="color:#e6db74">&#34;git clone ssh://vcs-user@codes.growingio.com/source/skywalking-agent.git ./agent&#34;</span> <span style="color:#f92672">!</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>在 ./docker/build.sh 中添加执行task 的命令</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git submodule init
git submodule update
cd  $home/growing-micros/
git checkout submodule
cd ../


sbt agent  &lt;- here!!!!
sbt dist
cp target/universal/$archive_name $home/$base/

cd $home/$base/
</code></pre></div><p>skywalking 有两个端，一个是服务端一个是客户端端，客户端是以javaagent 的方式嵌入到play 项目中</p>
<ul class="pa0">
  
</ul>
<div class="mt6">
      
      
      </div>
    </section>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://xiantang.github.io/" >
    &copy;  xiantang 2020 
  </a>
    <div>












</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
